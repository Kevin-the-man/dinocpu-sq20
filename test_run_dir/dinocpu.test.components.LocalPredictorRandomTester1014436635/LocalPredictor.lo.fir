circuit LocalPredictor :
  module LocalPredictor :
    input clock : Clock
    input reset : UInt<1>
    input io_pc : UInt<32>
    input io_update : UInt<1>
    input io_taken : UInt<1>
    output io_prediction : UInt<1>
  
    reg predictionTable_0 : UInt<2>, clock with :
      reset => (UInt<1>("h0"), predictionTable_0) @[branchpred.scala 37:32]
    reg predictionTable_1 : UInt<2>, clock with :
      reset => (UInt<1>("h0"), predictionTable_1) @[branchpred.scala 37:32]
    reg predictionTable_2 : UInt<2>, clock with :
      reset => (UInt<1>("h0"), predictionTable_2) @[branchpred.scala 37:32]
    reg predictionTable_3 : UInt<2>, clock with :
      reset => (UInt<1>("h0"), predictionTable_3) @[branchpred.scala 37:32]
    reg predictionTable_4 : UInt<2>, clock with :
      reset => (UInt<1>("h0"), predictionTable_4) @[branchpred.scala 37:32]
    reg predictionTable_5 : UInt<2>, clock with :
      reset => (UInt<1>("h0"), predictionTable_5) @[branchpred.scala 37:32]
    reg predictionTable_6 : UInt<2>, clock with :
      reset => (UInt<1>("h0"), predictionTable_6) @[branchpred.scala 37:32]
    reg predictionTable_7 : UInt<2>, clock with :
      reset => (UInt<1>("h0"), predictionTable_7) @[branchpred.scala 37:32]
    reg lastBranch : UInt<4>, clock with :
      reset => (UInt<1>("h0"), lastBranch) @[branchpred.scala 79:23]
    node _T_1 = or(lastBranch, UInt<3>("h0"))
    node _T_2 = bits(_T_1, 2, 0)
    node _GEN_0 = validif(eq(UInt<1>("h0"), _T_2), predictionTable_0) @[branchpred.scala 42:19]
    node _GEN_1 = mux(eq(UInt<1>("h1"), _T_2), predictionTable_1, _GEN_0) @[branchpred.scala 42:19]
    node _GEN_2 = mux(eq(UInt<2>("h2"), _T_2), predictionTable_2, _GEN_1) @[branchpred.scala 42:19]
    node _GEN_3 = mux(eq(UInt<2>("h3"), _T_2), predictionTable_3, _GEN_2) @[branchpred.scala 42:19]
    node _GEN_4 = mux(eq(UInt<3>("h4"), _T_2), predictionTable_4, _GEN_3) @[branchpred.scala 42:19]
    node _GEN_5 = mux(eq(UInt<3>("h5"), _T_2), predictionTable_5, _GEN_4) @[branchpred.scala 42:19]
    node _GEN_6 = mux(eq(UInt<3>("h6"), _T_2), predictionTable_6, _GEN_5) @[branchpred.scala 42:19]
    node _GEN_7 = mux(eq(UInt<3>("h7"), _T_2), predictionTable_7, _GEN_6) @[branchpred.scala 42:19]
    node _predictionTable_T_2 = _GEN_7 @[branchpred.scala 42:19 branchpred.scala 42:19 branchpred.scala 42:19 branchpred.scala 42:19 branchpred.scala 42:19 branchpred.scala 42:19 branchpred.scala 42:19 branchpred.scala 42:19 branchpred.scala 42:19]
    node _T_3 = neq(_predictionTable_T_2, UInt<2>("h3")) @[branchpred.scala 42:19]
    node _predictionTable_T_2_0 = _GEN_7 @[branchpred.scala 43:26 branchpred.scala 43:26 branchpred.scala 43:26 branchpred.scala 43:26 branchpred.scala 43:26 branchpred.scala 43:26 branchpred.scala 43:26 branchpred.scala 43:26 branchpred.scala 43:26]
    node _T_4 = add(_predictionTable_T_2_0, UInt<1>("h1")) @[branchpred.scala 43:26]
    node _T_5 = tail(_T_4, 1) @[branchpred.scala 43:26]
    node _predictionTable_T_2_1 = _T_5 @[branchpred.scala 43:15 branchpred.scala 43:15]
    node _GEN_8 = mux(eq(UInt<1>("h0"), _T_2), _predictionTable_T_2_1, predictionTable_0) @[branchpred.scala 43:15]
    node _GEN_9 = mux(eq(UInt<1>("h1"), _T_2), _predictionTable_T_2_1, predictionTable_1) @[branchpred.scala 43:15]
    node _GEN_10 = mux(eq(UInt<2>("h2"), _T_2), _predictionTable_T_2_1, predictionTable_2) @[branchpred.scala 43:15]
    node _GEN_11 = mux(eq(UInt<2>("h3"), _T_2), _predictionTable_T_2_1, predictionTable_3) @[branchpred.scala 43:15]
    node _GEN_12 = mux(eq(UInt<3>("h4"), _T_2), _predictionTable_T_2_1, predictionTable_4) @[branchpred.scala 43:15]
    node _GEN_13 = mux(eq(UInt<3>("h5"), _T_2), _predictionTable_T_2_1, predictionTable_5) @[branchpred.scala 43:15]
    node _GEN_14 = mux(eq(UInt<3>("h6"), _T_2), _predictionTable_T_2_1, predictionTable_6) @[branchpred.scala 43:15]
    node _GEN_15 = mux(eq(UInt<3>("h7"), _T_2), _predictionTable_T_2_1, predictionTable_7) @[branchpred.scala 43:15]
    node _GEN_16 = mux(_T_3, _GEN_8, predictionTable_0) @[branchpred.scala 42:30]
    node _GEN_17 = mux(_T_3, _GEN_9, predictionTable_1) @[branchpred.scala 42:30]
    node _GEN_18 = mux(_T_3, _GEN_10, predictionTable_2) @[branchpred.scala 42:30]
    node _GEN_19 = mux(_T_3, _GEN_11, predictionTable_3) @[branchpred.scala 42:30]
    node _GEN_20 = mux(_T_3, _GEN_12, predictionTable_4) @[branchpred.scala 42:30]
    node _GEN_21 = mux(_T_3, _GEN_13, predictionTable_5) @[branchpred.scala 42:30]
    node _GEN_22 = mux(_T_3, _GEN_14, predictionTable_6) @[branchpred.scala 42:30]
    node _GEN_23 = mux(_T_3, _GEN_15, predictionTable_7) @[branchpred.scala 42:30]
    node _T_6 = or(lastBranch, UInt<3>("h0"))
    node _T_7 = bits(_T_6, 2, 0)
    node _GEN_24 = validif(eq(UInt<1>("h0"), _T_7), predictionTable_0) @[branchpred.scala 49:19]
    node _GEN_25 = mux(eq(UInt<1>("h1"), _T_7), predictionTable_1, _GEN_24) @[branchpred.scala 49:19]
    node _GEN_26 = mux(eq(UInt<2>("h2"), _T_7), predictionTable_2, _GEN_25) @[branchpred.scala 49:19]
    node _GEN_27 = mux(eq(UInt<2>("h3"), _T_7), predictionTable_3, _GEN_26) @[branchpred.scala 49:19]
    node _GEN_28 = mux(eq(UInt<3>("h4"), _T_7), predictionTable_4, _GEN_27) @[branchpred.scala 49:19]
    node _GEN_29 = mux(eq(UInt<3>("h5"), _T_7), predictionTable_5, _GEN_28) @[branchpred.scala 49:19]
    node _GEN_30 = mux(eq(UInt<3>("h6"), _T_7), predictionTable_6, _GEN_29) @[branchpred.scala 49:19]
    node _GEN_31 = mux(eq(UInt<3>("h7"), _T_7), predictionTable_7, _GEN_30) @[branchpred.scala 49:19]
    node _predictionTable_T_7 = _GEN_31 @[branchpred.scala 49:19 branchpred.scala 49:19 branchpred.scala 49:19 branchpred.scala 49:19 branchpred.scala 49:19 branchpred.scala 49:19 branchpred.scala 49:19 branchpred.scala 49:19 branchpred.scala 49:19]
    node _T_8 = neq(_predictionTable_T_7, UInt<1>("h0")) @[branchpred.scala 49:19]
    node _predictionTable_T_7_0 = _GEN_31 @[branchpred.scala 50:26 branchpred.scala 50:26 branchpred.scala 50:26 branchpred.scala 50:26 branchpred.scala 50:26 branchpred.scala 50:26 branchpred.scala 50:26 branchpred.scala 50:26 branchpred.scala 50:26]
    node _T_9 = sub(_predictionTable_T_7_0, UInt<1>("h1")) @[branchpred.scala 50:26]
    node _T_10 = tail(_T_9, 1) @[branchpred.scala 50:26]
    node _predictionTable_T_7_1 = _T_10 @[branchpred.scala 50:15 branchpred.scala 50:15]
    node _GEN_32 = mux(eq(UInt<1>("h0"), _T_7), _predictionTable_T_7_1, predictionTable_0) @[branchpred.scala 50:15]
    node _GEN_33 = mux(eq(UInt<1>("h1"), _T_7), _predictionTable_T_7_1, predictionTable_1) @[branchpred.scala 50:15]
    node _GEN_34 = mux(eq(UInt<2>("h2"), _T_7), _predictionTable_T_7_1, predictionTable_2) @[branchpred.scala 50:15]
    node _GEN_35 = mux(eq(UInt<2>("h3"), _T_7), _predictionTable_T_7_1, predictionTable_3) @[branchpred.scala 50:15]
    node _GEN_36 = mux(eq(UInt<3>("h4"), _T_7), _predictionTable_T_7_1, predictionTable_4) @[branchpred.scala 50:15]
    node _GEN_37 = mux(eq(UInt<3>("h5"), _T_7), _predictionTable_T_7_1, predictionTable_5) @[branchpred.scala 50:15]
    node _GEN_38 = mux(eq(UInt<3>("h6"), _T_7), _predictionTable_T_7_1, predictionTable_6) @[branchpred.scala 50:15]
    node _GEN_39 = mux(eq(UInt<3>("h7"), _T_7), _predictionTable_T_7_1, predictionTable_7) @[branchpred.scala 50:15]
    node _GEN_40 = mux(_T_8, _GEN_32, predictionTable_0) @[branchpred.scala 49:28]
    node _GEN_41 = mux(_T_8, _GEN_33, predictionTable_1) @[branchpred.scala 49:28]
    node _GEN_42 = mux(_T_8, _GEN_34, predictionTable_2) @[branchpred.scala 49:28]
    node _GEN_43 = mux(_T_8, _GEN_35, predictionTable_3) @[branchpred.scala 49:28]
    node _GEN_44 = mux(_T_8, _GEN_36, predictionTable_4) @[branchpred.scala 49:28]
    node _GEN_45 = mux(_T_8, _GEN_37, predictionTable_5) @[branchpred.scala 49:28]
    node _GEN_46 = mux(_T_8, _GEN_38, predictionTable_6) @[branchpred.scala 49:28]
    node _GEN_47 = mux(_T_8, _GEN_39, predictionTable_7) @[branchpred.scala 49:28]
    node _GEN_48 = mux(io_taken, _GEN_16, _GEN_40) @[branchpred.scala 82:21]
    node _GEN_49 = mux(io_taken, _GEN_17, _GEN_41) @[branchpred.scala 82:21]
    node _GEN_50 = mux(io_taken, _GEN_18, _GEN_42) @[branchpred.scala 82:21]
    node _GEN_51 = mux(io_taken, _GEN_19, _GEN_43) @[branchpred.scala 82:21]
    node _GEN_52 = mux(io_taken, _GEN_20, _GEN_44) @[branchpred.scala 82:21]
    node _GEN_53 = mux(io_taken, _GEN_21, _GEN_45) @[branchpred.scala 82:21]
    node _GEN_54 = mux(io_taken, _GEN_22, _GEN_46) @[branchpred.scala 82:21]
    node _GEN_55 = mux(io_taken, _GEN_23, _GEN_47) @[branchpred.scala 82:21]
    node _GEN_56 = mux(io_update, _GEN_48, predictionTable_0) @[branchpred.scala 81:20]
    node _GEN_57 = mux(io_update, _GEN_49, predictionTable_1) @[branchpred.scala 81:20]
    node _GEN_58 = mux(io_update, _GEN_50, predictionTable_2) @[branchpred.scala 81:20]
    node _GEN_59 = mux(io_update, _GEN_51, predictionTable_3) @[branchpred.scala 81:20]
    node _GEN_60 = mux(io_update, _GEN_52, predictionTable_4) @[branchpred.scala 81:20]
    node _GEN_61 = mux(io_update, _GEN_53, predictionTable_5) @[branchpred.scala 81:20]
    node _GEN_62 = mux(io_update, _GEN_54, predictionTable_6) @[branchpred.scala 81:20]
    node _GEN_63 = mux(io_update, _GEN_55, predictionTable_7) @[branchpred.scala 81:20]
    node tableIndex = bits(io_pc, 5, 2) @[branchpred.scala 91:25]
    node _T_11 = bits(tableIndex, 2, 0)
    node _GEN_64 = validif(eq(UInt<1>("h0"), _T_11), predictionTable_0) @[branchpred.scala 94:47]
    node _GEN_65 = mux(eq(UInt<1>("h1"), _T_11), predictionTable_1, _GEN_64) @[branchpred.scala 94:47]
    node _GEN_66 = mux(eq(UInt<2>("h2"), _T_11), predictionTable_2, _GEN_65) @[branchpred.scala 94:47]
    node _GEN_67 = mux(eq(UInt<2>("h3"), _T_11), predictionTable_3, _GEN_66) @[branchpred.scala 94:47]
    node _GEN_68 = mux(eq(UInt<3>("h4"), _T_11), predictionTable_4, _GEN_67) @[branchpred.scala 94:47]
    node _GEN_69 = mux(eq(UInt<3>("h5"), _T_11), predictionTable_5, _GEN_68) @[branchpred.scala 94:47]
    node _GEN_70 = mux(eq(UInt<3>("h6"), _T_11), predictionTable_6, _GEN_69) @[branchpred.scala 94:47]
    node _GEN_71 = mux(eq(UInt<3>("h7"), _T_11), predictionTable_7, _GEN_70) @[branchpred.scala 94:47]
    node _predictionTable_T_11 = _GEN_71 @[branchpred.scala 94:47 branchpred.scala 94:47 branchpred.scala 94:47 branchpred.scala 94:47 branchpred.scala 94:47 branchpred.scala 94:47 branchpred.scala 94:47 branchpred.scala 94:47 branchpred.scala 94:47]
    node _T_12 = bits(_predictionTable_T_11, 1, 1) @[branchpred.scala 94:47]
    node _T__0 = UInt<2>("h2") @[branchpred.scala 37:40 branchpred.scala 37:40]
    node _T__1 = UInt<2>("h2") @[branchpred.scala 37:40 branchpred.scala 37:40]
    node _T__2 = UInt<2>("h2") @[branchpred.scala 37:40 branchpred.scala 37:40]
    node _T__3 = UInt<2>("h2") @[branchpred.scala 37:40 branchpred.scala 37:40]
    node _T__4 = UInt<2>("h2") @[branchpred.scala 37:40 branchpred.scala 37:40]
    node _T__5 = UInt<2>("h2") @[branchpred.scala 37:40 branchpred.scala 37:40]
    node _T__6 = UInt<2>("h2") @[branchpred.scala 37:40 branchpred.scala 37:40]
    node _T__7 = UInt<2>("h2") @[branchpred.scala 37:40 branchpred.scala 37:40]
    io_prediction <= _T_12 @[branchpred.scala 94:17]
    predictionTable_0 <= mux(reset, _T__0, _GEN_56) @[branchpred.scala 43:15 branchpred.scala 50:15]
    predictionTable_1 <= mux(reset, _T__1, _GEN_57) @[branchpred.scala 43:15 branchpred.scala 50:15]
    predictionTable_2 <= mux(reset, _T__2, _GEN_58) @[branchpred.scala 43:15 branchpred.scala 50:15]
    predictionTable_3 <= mux(reset, _T__3, _GEN_59) @[branchpred.scala 43:15 branchpred.scala 50:15]
    predictionTable_4 <= mux(reset, _T__4, _GEN_60) @[branchpred.scala 43:15 branchpred.scala 50:15]
    predictionTable_5 <= mux(reset, _T__5, _GEN_61) @[branchpred.scala 43:15 branchpred.scala 50:15]
    predictionTable_6 <= mux(reset, _T__6, _GEN_62) @[branchpred.scala 43:15 branchpred.scala 50:15]
    predictionTable_7 <= mux(reset, _T__7, _GEN_63) @[branchpred.scala 43:15 branchpred.scala 50:15]
    lastBranch <= tableIndex @[branchpred.scala 97:14]
